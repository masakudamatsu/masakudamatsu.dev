<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Google Fonts (to be removed by locally hosting it)-->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Raleway&family=Zen+Kurenaido&family=Zen+Loop&display=swap"
      rel="stylesheet"
    />
    <title>
      Masa Kudamatsu — Kyoto-based web developer with UX design skills
    </title>
    <meta name="description" content="" />
    <style>
      *,
      *::before,
      *::after {
        box-sizing: border-box;
      }
      * {
        margin: 0;
      }
      body {
        /* Disable MacOS browsers' default subpixel antialising (see https://www.joshwcomeau.com/css/custom-css-reset/#four-font-smoothing-5) */
        -webkit-font-smoothing: antialiased;
        /* Make text rendering consistent across browsers (see https://andy-bell.co.uk/a-modern-css-reset/)*/
        text-rendering: optimizeSpeed;
      }
      canvas,
      img,
      picture,
      svg,
      video {
        display: block;
        height: auto; /* preserve aspect ratio set with height and width attributes */
        max-width: 100%;
      }
      button,
      input,
      select,
      textarea {
        font: inherit;
      }
      ul[role="list"] {
        list-style: none;
        padding-left: 0; /* remove indentation */
      }
      :root {
        /* Font Metrics */
        --xHeight: 10;
        --scale: 1.5;
        --sqrt-scale: 1.225;
        --raleway-xHeight: calc(519 / 1000); /* sxHeight / unitsPerEm */
        --raleway-capHeight: calc(710 / 1000); /* sCapHeight / unitsPerEm */
        --zenloop-capHeight: calc(690 / 1000); /* sCapHeight / unitsPerEm */
        /* Font size (in px) */
        --font100-raleway: calc(var(--xHeight) / var(--raleway-xHeight));
        --font100-japanese: 17.6; /* make it look similar in size to Raleway if --xHeight: 10 */
        --capHeight100: calc(var(--font100-raleway) * var(--raleway-capHeight));
        --font100-zenloop: calc(var(--capHeight100) / var(--zenloop-capHeight));
        --font200-zenloop: calc(var(--scale) * var(--font100-zenloop));
        --font250-zenloop: calc(var(--sqrt-scale) * var(--font200-zenloop));
        --font300-zenloop: calc(var(--scale) * var(--font200-zenloop));
        --font400-zenloop: calc(var(--scale) * var(--font300-zenloop));
        --font500-zenloop: calc(var(--scale) * var(--font400-zenloop));
        --xHeight10: calc((1 / var(--scale)) * var(--xHeight));
        --font10-raleway: calc(var(--xHeight10) / var(--raleway-xHeight));
        /* white space */
        /* If changed, adjust the `sizes` attribute for <img> */
        --whitespace100: calc(var(--scale) * var(--xHeight));
        --whitespace200: calc(var(--scale) * var(--whitespace100));
        --whitespace300: calc(var(--scale) * var(--whitespace200));
        --whitespace400: calc(var(--scale) * var(--whitespace300));
        --whitespace10: var(--xHeight);
      }
      /* Font */
      p {
        font-family: Raleway, "Trebuchet MS", sans-serif;
        font-size: calc(var(--font100-raleway) / 16 * 1rem);
        font-weight: 400;
        line-height: calc(
          (var(--whitespace100) + var(--xHeight)) / var(--font100-raleway)
        );
      }
      h1::before,
      h1::after,
      h2::before,
      h2::after,
      h3::before,
      h3::after,
      p::before,
      p::after {
        content: "";
        display: block;
        height: 0;
        width: 0;
      }
      p::before {
        margin-bottom: calc(-6 / 16 * 1rem);
      }
      p::after {
        margin-top: calc(-7 / 16 * 1rem);
      }
      .pill {
        font-family: Raleway, "Trebuchet MS", sans-serif;
        font-size: var(--font10-raleway / 16 * 1rem);
        font-weight: 400;
        line-height: calc(
          (var(--whitespace10) + var(--xHeight10)) / var(--font10-raleway)
        );
      }
      h1,
      h2,
      h3 {
        font-family: "Zen Loop", cursive;
        font-weight: 400;
        text-transform: uppercase;
      }
      h1 {
        font-size: calc(var(--font500-zenloop) / 16 * 1rem);
        line-height: calc(
          (
              var(--font500-zenloop) * var(--zenloop-capHeight) +
                var(--whitespace100)
            ) / var(--font500-zenloop)
        );
      }
      h1::before {
        margin-bottom: calc(-2 / 16 * 1rem);
      }
      h1::after {
        margin-top: calc(-14 / 16 * 1rem);
      }

      @media screen and (max-width: 38.75em) {
        /* = 620px / 16 */
        h1 {
          font-size: calc(var(--font400-zenloop) / 16 * 1rem);
          line-height: calc(
            (
                var(--font400-zenloop) * var(--zenloop-capHeight) +
                  var(--whitespace100)
              ) / var(--font400-zenloop)
          );
        }
        h1::before {
          margin-bottom: calc(-4 / 16 * 1rem);
        }
        h1::after {
          margin-top: calc(-12 / 16 * 1rem);
        }
      }
      h2 {
        font-size: calc(var(--font200-zenloop) / 16 * 1rem);
        line-height: calc(
          (
              var(--font200-zenloop) * var(--zenloop-capHeight) +
                var(--whitespace100)
            ) / var(--font200-zenloop)
        );
      }
      h2::before {
        margin-bottom: calc(-7 / 16 * 1rem);
      }
      h2::after {
        margin-top: calc(-10 / 16 * 1rem);
      }
      h3 {
        font-size: calc(var(--font300-zenloop) / 16 * 1rem);
        line-height: calc(
          (
              var(--font300-zenloop) * var(--zenloop-capHeight) +
                var(--whitespace100)
            ) / var(--font300-zenloop)
        );
      }
      h3::before {
        margin-bottom: calc(-5 / 16 * 1rem);
      }
      h3::after {
        margin-top: calc(-11 / 16 * 1rem);
      }
      @media screen and (max-width: 21.5625em) {
        /* = 345px / 16 */
        h3 {
          font-size: calc(var(--font250-zenloop) / 16 * 1rem);
        }
        h3::after {
          margin-top: calc(-9 / 16 * 1rem);
        }
      }
      p[lang="ja"] {
        font-family: "Zen Kurenaido", "Helvetica Neue", "Segoe UI",
          "Hiragino Kaku Gothic ProN", "Hiragino Sans", Meiryo, sans-serif;
        font-size: calc(var(--font100-japanese) / 16 * 1rem);
        font-weight: 400;
        line-height: calc(
          (var(--whitespace100) + var(--xHeight)) / var(--font100-japanese)
        );
      }
      p[lang="ja"]::before {
        margin-bottom: calc(-6 / 16 * 1rem);
      }
      p[lang="ja"]::after {
        margin-top: calc(-5 / 16 * 1rem);
      }
      /* Hard-wrap long words (https://www.joshwcomeau.com/css/custom-css-reset/#seven-word-wrapping-8) */
      p {
        overflow-wrap: break-word;
      }
      /* Spacing */
      header,
      main,
      footer {
        padding: calc(var(--whitespace400) / 16 * 1rem)
          calc(var(--whitespace100) / 16 * 1rem);
        /* If changed, adjust the `sizes` attribute for <img> */
      }
      @media screen and (min-width: 601px) {
        header,
        main,
        footer {
          padding: calc(var(--whitespace400) / 16 * 1rem);
          /* If changed, adjust the `sizes` attribute for <img> */
        }
      }
      .whitespace-200 > * + * {
        margin-top: calc(var(--whitespace200) / 16 * 1rem);
      }
      .whitespace-300 > * + * {
        margin-top: calc(var(--whitespace300) / 16 * 1rem);
      }
      .whitespace-400 > * + * {
        margin-top: calc(var(--whitespace400) / 16 * 1rem);
      }
      :root {
        --minimum-target-size: 48px;
        /* Video/Image max-width */
        --video-max-width: 624px;
        /* Whitespace scale */
        /* If changed, adjust the `sizes` attribute for <img> */
        --gap100: 10px;
        --gap200: 20px;
        /* Color scheme */
        --black: #030303; /* (1) pure black would slow down scrolling on OLED screens (https://twitter.com/marcedwards/status/1053519077958803456) */
        --mid-grey: #767676; /* (1.1) ensure 4.5 to 1 contrast against #030303 (https://www.siegemedia.com/contrast-ratio#%23767676-on-%23030303) */
        --light-grey: #949494; /* (1.1.1.1) ensure 3 to 1 contrast against #fefefe (https://www.siegemedia.com/contrast-ratio#%23949494-on-%23fefefe) */
        --off-white: #d1d1d1; /* (1.1.1.2) ensure 1.5 to 1 contrast against #fefefe (https://www.siegemedia.com/contrast-ratio#%23d1d1d1-on-%23fefefe) */
        --white: #fefefe; /* (1.1.1) ensure 4.5 to 1 contrast against #767676 (https://www.siegemedia.com/contrast-ratio#%23767676-on-%23fefefe) */
        --red: #dc4343; /* chroma 60% while keeping the luminance at the level of pure red */
        --yellow: #fefe65; /* chroma 60% while keeping the luminance at the level of pure yellow */
        --green: #60f960; /* chroma 60% while keeping the luminance at the level of pure green */
        --cyan: #61fafa; /* chroma 60% while keeping the luminance at the level of pure cyan */
        --blue: #2e2ec7; /* chroma 60% while keeping the luminance at the level of pure blue */
        --purple: #e64de6; /* chroma 60% while keeping the luminance at the level of pure purple */
        --garden-green: #295921; /* switch hue to 110deg from TJG's theme color */
        --garden-green-light: #528048; /* brighten --garden-green to 4.54 (enough contrast against --white) while keeping chroma intact */
        /* Shape */
        --round-corner: 32px; /* TODO: match it with .pill once the font-family is fixed */
      }
      /* Measure */
      .measure {
        max-width: calc(var(--video-max-width) + var(--gap200));
      }
      /* Background color */
      html {
        /* Scroll-bounce areas (otherwise white background will be revealed) */
        background: var(--black);
      }
      .bg-black {
        background: var(--black);
      }
      .bg-black-to-mid-grey {
        background: linear-gradient(150deg, var(--black), var(--mid-grey));
      }
      .bg-mid-grey-to-black {
        /* To smoothly transition into black in scroll-bounce areas */
        background: linear-gradient(to bottom, var(--mid-grey), var(--black));
      }
      .bg-typeset {
        position: relative;
        z-index: 0;
      }
      .bg-typeset div.background {
        background: var(--white);
        border-radius: inherit;
        color: var(--off-white);
        columns: 150px 2;
        column-gap: 20px;
        height: 100%;
        left: 0;
        overflow: hidden;
        position: absolute;
        top: 0;
        width: 100%;
        z-index: -1;
      }
      .bg-typeset div.background p {
        /* obtained with Roboto, x-height 2 to line-height 5, x-height 10px */
        font-family: Helvetica, Arial, sans-serif;
        font-size: 18.9279px;
        font-weight: 400;
        line-height: 1.3208;
      }
      .bg-typeset div.background p + p {
        /* obtained with Roboto, x-height 2 to line-height 5, x-height 10px */
        margin-top: 10.9566px;
      }
      .bg-color {
        background: conic-gradient(
          var(--green),
          var(--cyan),
          var(--blue),
          var(--purple),
          var(--red),
          var(--yellow),
          var(--green)
        );
      }
      .bg-garden {
        background: linear-gradient(
          135deg,
          var(--garden-green),
          var(--garden-green-light),
          var(--garden-green)
        );
      }
      .bg-grid {
        --line-width: 1px;
        --size: 40px;
        --top-left-height: 14px;
        --top-left-width: 28px;
        --color-stop-bottom: calc(var(--top-left-height) + var(--line-width));
        --color-stop-right: calc(var(--top-left-width) + var(--line-width));
        background: 
          /* vertical lines */ linear-gradient(
            to right,
            transparent var(--top-left-width),
            var(--off-white) var(--top-left-width),
            var(--off-white) var(--color-stop-right),
            transparent var(--color-stop-right)
          ),
          /* horizontal lines */
            linear-gradient(
              to bottom,
              transparent var(--top-left-height),
              var(--off-white) var(--top-left-height),
              var(--off-white) var(--color-stop-bottom),
              transparent var(--color-stop-bottom)
            ),
          /* solid background */ linear-gradient(var(--white), var(--white));
        background-size: var(--size) var(--size);
      }
      /* Divider */
      .divider-light-grey {
        border-top: 1px solid var(--light-grey);
      }
      /* Color */
      .color-white {
        color: var(--white);
      }
      .color-black {
        color: var(--black);
      }
      /* Utilities */
      .transparent {
        opacity: 0;
      }
      .removed-if-js-disabled {
        display: none; /* for JS-disabled users */
      }
      /* Leaf Card block */
      .leaf-card {
        border-radius: var(--round-corner) 0 var(--round-corner) 0;
        /* Prevent background color leak outs (https://tumble.sneak.co.nz/post/928998513/fixing-the-background-bleed) */
        -webkit-background-clip: padding-box;
        -moz-background-clip: padding;
        background-clip: padding-box;
        display: grid;
        gap: var(--gap100);
        grid-template-areas: "video video" "playback text" "button text";
        grid-template-columns: var(--minimum-target-size) 1fr;
        grid-template-rows: auto var(--minimum-target-size) auto;
        width: 100%;
      }
      .leaf-card:nth-of-type(even) {
        border-radius: 0 var(--round-corner) 0 var(--round-corner);
      }
      .leaf-card figure {
        grid-area: video;
      }
      /* Round the top-left or top-right corner of media */
      .leaf-card figure,
      .leaf-card figure img,
      .leaf-card figure video {
        --border-radius: calc(var(--round-corner) - var(--gap200));
        border-radius: var(--border-radius) 0 0 0;
      }
      .leaf-card:nth-of-type(even) figure,
      .leaf-card:nth-of-type(even) figure img,
      .leaf-card:nth-of-type(even) figure video {
        --border-radius: calc(var(--round-corner) - var(--gap200));
        border-radius: 0 var(--border-radius) 0 0;
      }
      .leaf-card .buttonGroup {
        display: grid;
        gap: var(--gap100);
        grid-area: button;
        grid-template-areas: "." "website" "source";
        grid-template-rows:
          1fr var(--minimum-target-size)
          var(--minimum-target-size);
      }
      .leaf-card:last-of-type .buttonGroup {
        grid-template-areas: "." "." "website";
      }
      .leaf-card .playbackButton {
        grid-area: playback;
      }
      .leaf-card .title-card {
        grid-area: text;
      }
      /* Prevent layout shift in Safari when first playing the video (source: https://www.amitmerchant.com/prevent-image-layout-shift-using-this-simple-css-hack/) */
      .leaf-card figure {
        padding-top: 100%; /* 1 to 1 aspect ratio */
        position: relative;
        z-index: 0; /* to create a stacking context */
      }
      .leaf-card figure video,
      .leaf-card figure img {
        bottom: 0;
        left: 0;
        position: absolute;
        right: 0;
        top: 0;
      }
      /* Poster image (<video poster=""> doesn't work with Safari for some reason... */
      .leaf-card figure img {
        transition: opacity 500ms linear;
        z-index: 1; /* hide the video until it's fully loaded */
      }
      /* Placeholder image */
      .leaf-card[data-variant="line-height-picker"] figure {
        background-image: url("media/line-height-picker3.png");
        background-size: cover;
      }
      .leaf-card[data-variant="triangulum"] figure {
        background-image: url("media/triangulum3.png");
        background-size: cover;
      }
      .leaf-card[data-variant="tjg"] figure {
        background-image: url("media/tjg3.png");
        background-size: cover;
      }
      .leaf-card[data-variant="my-ideal-map"] figure {
        background-image: url("media/my-ideal-map3.png");
        background-size: cover;
      }
      /* Responsive layout */
      @media screen and (min-width: 765.25px) {
        /* 704px is derived from var(--video-max-width) + 2 * var(--gap200) + 2 * var(--whitespace400) */
        .leaf-card {
          /* left-align grid items */
          grid-template-areas: "video video ." "playback text ." "button text .";
          grid-template-columns:
            var(--minimum-target-size)
            calc(
              var(--video-max-width) - var(--gap100) -
                var(--minimum-target-size)
            )
            1fr;
        }
        .leaf-card:nth-of-type(even) {
          /* right-align grid items */
          grid-template-areas: ". video video" ". playback text" ". button text";
          grid-template-columns:
            1fr
            var(--minimum-target-size)
            calc(
              var(--video-max-width) - var(--gap100) -
                var(--minimum-target-size)
            );
        }
      }
      @media screen and (min-width: 1191.25px) {
        /* 1130px is derived from var(--video-max-width) * 5/3 + var(--gap100) + 2 * var(--gap200) + 2 * var(--whitespace400) */
        .alternate-position {
          display: flex;
          flex-direction: column;
        }
        .alternate-position .leaf-card:nth-of-type(odd) {
          align-self: flex-end;
        }
        .leaf-card {
          align-items: flex-start; /* avoid stretching title-card */
          grid-template-areas: "video text" "video button" "video ." "video playback";
          grid-template-columns: 3fr 2fr;
          grid-template-rows: auto var(--minimum-target-size) auto var(
              --minimum-target-size
            );
          max-width: calc(
            var(--video-max-width) * 5 / 3 + var(--gap100) + var(--gap200) * 2
          );
        }
        .leaf-card:nth-of-type(even) {
          grid-template-areas: "text video" "button video" ". video" "playback video";
          grid-template-columns: 2fr 3fr;
        }
        .leaf-card .title-card {
          width: calc(var(--video-max-width) * 2 / 3);
        }
        .leaf-card .buttonGroup {
          display: flex;
          flex-direction: row;
          justify-content: flex-end;
        }
        .leaf-card:nth-of-type(even) .buttonGroup {
          justify-content: flex-start;
        }
        .leaf-card .playbackButton {
          align-self: end;
        }
        .leaf-card:nth-of-type(even) .playbackButton {
          justify-self: end;
        }
      }
      @media screen and (min-width: 1617.25px) {
        /* 1556px is derived from var(--video-max-width) + 2 * var(--video-max-width) * 2/3 + 2 * var(--gap100) + 2 * var(--gap200) + 2 * var(--whitespace400) */
        main > section {
          align-items: center;
          display: flex;
          flex-direction: column;
          justify-content: center;
        }
        .alternate-position {
          width: calc(
            var(--video-max-width) * 7 / 3 + var(--gap100) * 2 + var(--gap200) *
              2
          );
        }
      }
      /* section layout */
      .padding {
        /* If changed, adjust the `sizes` attribute for <img> */
        padding: var(--gap200);
      }
      .vertical-spacing > * + * {
        /* https://every-layout.dev/layouts/stack/ */
        margin-top: var(--gap200);
      }
      /* video controls */
      .playbackButton {
        height: var(--minimum-target-size);
        width: var(--minimum-target-size);
      }
      .playbackButton[disabled] {
        cursor: not-allowed;
        opacity: 0.4;
      }
      /* link buttons */
      .linkButton {
        align-items: center;
        background: var(--white);
        border: 1px solid var(--light-grey);
        border-radius: 4px;
        display: flex;
        height: var(--minimum-target-size);
        justify-content: center;
        width: var(--minimum-target-size);
      }
      .linkButton[data-type="website"] {
        grid-area: website;
      }
      .linkButton[data-type="source"] {
        grid-area: source;
      }
      /* pills */
      .pill-container {
        --row-gap: calc(var(--whitespace10) / 16 * 1rem);
        column-gap: calc(
          var(--row-gap) / 2
        ); /* to be optically equal to row-gap */
        display: flex;
        flex-wrap: wrap;
        row-gap: var(--row-gap);
      }
      .pill {
        border: 1px solid currentColor;
        border-radius: 100px; /* TODO: specify once the font-family is fixed */
        color: currentColor;
        display: inline-block;
        padding: 0 10px;
        text-align: center;
      }
      .pill a {
        color: inherit;
        text-decoration: none;
      }
      /* Title-card Block */
      .title-card {
        background: var(--white);
        box-shadow: 0px 0px 4px var(--mid-grey);
        padding: calc(var(--whitespace100) / 16 * 1rem);
        width: 100%; /* necessary to expand beyond its text content length */
      }
    </style>
    <!-- Asynchronously load CSS stylesheet (https://web.dev/defer-non-critical-css/#optimize)-->
    <link
      rel="preload"
      href="style.css"
      as="style"
      onload="this.onload=null;this.rel='stylesheet'"
    />
    <noscript>
      <link rel="stylesheet" href="style.css" />
    </noscript>
  </head>
  <body class="color-white">
    <header class="whitespace-300 bg-black">
      <h1>Masa Kudamatsu</h1>
      <div class="whitespace-200">
        <p>Kyoto-based web developer with UX design best practices in mind</p>
        <p lang="ja">
          最良のユーザー体験を実現するためにコードを書く、京都在住のWebエンジニア
        </p>
      </div>
    </header>
    <main class="whitespace-400 bg-black-to-mid-grey divider-light-grey">
      <section class="whitespace-300">
        <h2>Works</h2>
        <div class="measure whitespace-200">
          <p>
            All designed and coded from scratch by myself, along with test code
            in Jest, Cypress, and Testing Library
          </p>
          <p lang="ja">
            全て、テンプレートを使わずにデザイン・コーディングしています。また、Jest、Cypress、及び、Testing
            Library を用いて、テストコードも書いています。
          </p>
        </div>
        <div class="alternate-position whitespace-300">
          <section
            class="leaf-card padding bg-typeset color-black"
            data-variant="line-height-picker"
          >
            <div aria-hidden class="background">
              <p>
                Reed College at that time offered perhaps the best calligraphy
                instruction in the country. Throughout the campus every poster,
                every label on every drawer, was beautifully hand calligraphed.
                Because I had dropped out and didn’t have to take the normal
                classes, I decided to take a calligraphy class to learn how to
                do this. I learned about serif and sans serif typefaces, about
                varying the amount of space between different letter
                combinations, about what makes great typography great. It was
                beautiful, historical, artistically subtle in a way that science
                can’t capture, and I found it fascinating.
              </p>
              <p>
                None of this had even a hope of any practical application in my
                life. But 10 years later, when we were designing the first
                Macintosh computer, it all came back to me. And we designed it
                all into the Mac. It was the first computer with beautiful
                typography. If I had never dropped in on that single course in
                college, the Mac would have never had multiple typefaces or
                proportionally spaced fonts. And since Windows just copied the
                Mac, it’s likely that no personal computer would have them. If I
                had never dropped out, I would have never dropped in on this
                calligraphy class, and personal computers might not have the
                wonderful typography that they do. Of course it was impossible
                to connect the dots looking forward when I was in college. But
                it was very, very clear looking backward 10 years later.
              </p>
            </div>
            <figure>
              <video
                height="624"
                width="624"
                controls
                loop
                muted
                playsinline
                preload="metadata"
              >
                <source src="media/line-height-picker.mp4" type="video/mp4" />
                <!-- Offer download -->
                <a href="media/line-height-picker.mp4">Download the video</a>
              </video>
              <img
                alt=""
                class="removed-if-js-disabled transparent"
                sizes="(max-width: 600px) calc(100vw - 70px), (max-width: 766px) calc(100vw - 141.25px), 624px"
                srcset="
                  media/line-height-picker624.png   624w,
                  media/line-height-picker990.png   990w,
                  media/line-height-picker1248.png 1248w
                "
                src="media/line-height-picker624.png"
              />
            </figure>
            <button
              aria-label="Play demo for Line-height Picker"
              class="playbackButton removed-if-js-disabled"
              disabled
              type="button"
            >
              <img alt="" aria-hidden src="play.svg" />
            </button>
            <div class="buttonGroup">
              <a
                aria-label="Visit Line-height Picker"
                class="linkButton"
                data-type="website"
                href="https://line-height-picker.vercel.app"
                rel="noopener noreferrer"
                target="_blank"
              >
                <img alt="" aria-hidden src="open_in_new.svg" />
              </a>
              <a
                aria-label="See source code for Line-height Picker"
                class="linkButton"
                data-type="source"
                href="https://github.com/masakudamatsu/line-height-picker"
                rel="noopener noreferrer"
                target="_blank"
              >
                <img alt="" aria-hidden src="code.svg" />
              </a>
            </div>
            <div class="title-card whitespace-300">
              <div class="whitespace-200">
                <h3>Line-height Picker</h3>
                <p>March–July 2020</p>
              </div>
              <div class="whitespace-200">
                <p>
                  Web tool to help set the line height of paragraph text
                  beautifully
                </p>
                <p lang="ja">
                  欧文フォントの行間を小文字のエックスの高さとの整数比で指定するためのWebツール。
                </p>
              </div>
              <ul role="list" class="pill-container">
                <li class="pill">React</li>
                <li class="pill">Styled Components</li>
                <li class="pill">
                  <a
                    href="https://opentype.js.org/"
                    rel="noopener noreferrer"
                    target="_blank"
                    >Opentype.js</a
                  >
                </li>
              </ul>
            </div>
          </section>
          <section class="leaf-card padding bg-color" data-variant="triangulum">
            <figure>
              <video
                height="624"
                width="624"
                controls
                loop
                muted
                playsinline
                preload="metadata"
              >
                <source src="media/triangulum.mp4" type="video/mp4" />
                <!-- Offer download -->
                <a href="media/triangulum.mp4">Download the video</a>
              </video>
              <img
                alt=""
                class="removed-if-js-disabled transparent"
                sizes="(max-width: 600px) calc(100vw - 70px), (max-width: 766px) calc(100vw - 141.25px), 624px"
                srcset="
                  media/triangulum624.png   624w,
                  media/triangulum990.png   990w,
                  media/triangulum1248.png 1248w
                "
                src="media/triangulum624.png"
              />
            </figure>
            <button
              aria-label="Play demo for Triangulum Color Picker"
              class="playbackButton removed-if-js-disabled"
              disabled
              type="button"
            >
              <img alt="" aria-hidden src="play.svg" />
            </button>
            <div class="buttonGroup">
              <a
                aria-label="Visit Triangulum Color Picker"
                class="linkButton"
                data-type="website"
                href="https://triangulum.netlify.app"
                rel="noopener noreferrer"
                target="_blank"
              >
                <img alt="" aria-hidden src="open_in_new.svg" />
              </a>
              <a
                aria-label="See source code for Triangulum Color Picker"
                class="linkButton"
                data-type="source"
                href="https://github.com/masakudamatsu/triangulum-color-picker"
                rel="noopener noreferrer"
                target="_blank"
              >
                <img alt="" aria-hidden src="code.svg" />
              </a>
            </div>
            <div class="title-card whitespace-300 color-black">
              <div class="whitespace-200">
                <h3>Triangulum Color Picker</h3>
                <p>December 2020–March 2021</p>
              </div>
              <div class="whitespace-200">
                <p>Web tool to help pick accessible and harmonious colors</p>
                <p lang="ja">
                  色コードを入力すると、アクセシビリティーのために重要な黒との明度差、及び、他の色と調和させるための基準の1つとなる純色の含有割合を表示するWebツール。
                </p>
              </div>
              <ul role="list" class="pill-container">
                <li class="pill">Canvas API</li>
                <li class="pill">React</li>
                <li class="pill">Next.js</li>
                <li class="pill">Styled Components</li>
              </ul>
            </div>
          </section>
          <section class="leaf-card padding bg-garden" data-variant="tjg">
            <figure>
              <video
                height="624"
                width="624"
                controls
                loop
                muted
                playsinline
                preload="metadata"
              >
                <source src="media/tjg.mp4" type="video/mp4" />
                <!-- Offer download -->
                <a href="media/tjg.mp4">Download the video</a>
              </video>
              <img
                alt=""
                class="removed-if-js-disabled transparent"
                sizes="(max-width: 600px) calc(100vw - 70px), (max-width: 766px) calc(100vw - 141.25px), 624px"
                srcset="
                  media/tjg624.png   624w,
                  media/tjg990.png   990w,
                  media/tjg1248.png 1248w
                "
                src="media/tjg624.png"
              />
            </figure>
            <button
              aria-label="Play demo for Translating Japanese Gardens"
              class="playbackButton removed-if-js-disabled"
              disabled
              type="button"
            >
              <img alt="" aria-hidden src="play.svg" />
            </button>
            <div class="buttonGroup">
              <a
                aria-label="Visit Translating Japanese Gardens"
                class="linkButton"
                data-type="website"
                href="https://translating-japanese-gardens.pages.dev"
                rel="noopener noreferrer"
                target="_blank"
              >
                <img alt="" aria-hidden src="open_in_new.svg" />
              </a>
              <a
                aria-label="See source code for Translating Japanese Gardens"
                class="linkButton"
                data-type="source"
                href="https://github.com/masakudamatsu/translating-japanese-gardens"
                rel="noopener noreferrer"
                target="_blank"
              >
                <img alt="" aria-hidden src="code.svg" />
              </a>
            </div>
            <div class="title-card whitespace-300 color-black">
              <div class="whitespace-200">
                <h3>Translating Japanese Gardens</h3>

                <p>June–August 2021</p>
              </div>
              <div class="whitespace-200">
                <p>
                  A blog on historical Japanese garden design, presented like a
                  hanging scroll
                </p>
                <p lang="ja">
                  日本の名庭園のデザイン意図を深読みするブログ。掛軸をモチーフにUIをデザイン。
                </p>
              </div>
              <ul role="list" class="pill-container">
                <li class="pill">React</li>
                <li class="pill">Next.js</li>
                <li class="pill">Styled Components</li>
                <li class="pill">
                  <a
                    href="https://github.com/zachleat/glyphhanger"
                    rel="noopener noreferrer"
                    target="_blank"
                    >Glyphhanger</a
                  >
                </li>
              </ul>
            </div>
          </section>
          <section
            class="leaf-card padding bg-grid color-black"
            data-variant="my-ideal-map"
          >
            <figure>
              <video
                height="624"
                width="624"
                controls
                loop
                muted
                playsinline
                preload="metadata"
              >
                <source src="media/my-ideal-map.mp4" type="video/mp4" />
                <!-- Offer download -->
                <a href="media/my-ideal-map.mp4">Download the video</a>
              </video>
              <img
                alt=""
                class="removed-if-js-disabled transparent"
                sizes="(max-width: 600px) calc(100vw - 70px), (max-width: 766px) calc(100vw - 141.25px), 624px"
                srcset="
                  media/my-ideal-map624.png   624w,
                  media/my-ideal-map990.png   990w,
                  media/my-ideal-map1248.png 1248w
                "
                src="media/my-ideal-map624.png"
              />
            </figure>
            <button
              aria-label="Play demo for My Ideal Map"
              class="playbackButton removed-if-js-disabled"
              disabled
              type="button"
            >
              <img alt="" aria-hidden src="play.svg" />
            </button>
            <div class="buttonGroup">
              <a
                aria-label="Visit My Ideal Map"
                class="linkButton"
                data-type="website"
                href="https://my-ideal-map.app"
                rel="noopener noreferrer"
                target="_blank"
              >
                <img alt="" aria-hidden src="open_in_new.svg" />
              </a>
            </div>
            <div class="title-card whitespace-300">
              <div class="whitespace-200">
                <h3>My Ideal Map</h3>
                <p>August 2021–present</p>
              </div>
              <div class="whitespace-200">
                <p>
                  Full-stack web app that allows the user to save places with
                  rich-text notes on Google Maps
                </p>
                <p lang="ja">
                  Googleマップ上に保存した場所についてのメモにリンクを貼ることができる、Webアプリ。
                </p>
              </div>
              <ul role="list" class="pill-container">
                <li class="pill">Geolocation API</li>
                <li class="pill">React</li>
                <li class="pill">Next.js</li>
                <li class="pill">Styled Components</li>
                <li class="pill">Prisma</li>
                <li class="pill">PostgreSQL</li>
                <li class="pill">
                  <a
                    href="https://mapsplatform.google.com"
                    rel="noopener noreferrer"
                    target="_blank"
                    >Google Maps Platform</a
                  >
                </li>
                <li class="pill">
                  <a
                    href="https://auth0.com"
                    rel="noopener noreferrer"
                    target="_blank"
                    >Auth0</a
                  >
                </li>
              </ul>
            </div>
          </section>
        </div>
      </section>
      <section class="whitespace-300">
        <h2>About Me</h2>
        <div class="measure whitespace-200">
          <p>
            I was born and grew up in Tokyo. To study for a PhD in economics, I
            moved to London and lived there for five years. Then I landed a job
            as an academic data analyst at Stockholm University (for 8 years)
            and then at Osaka University (for 2.5 years).
          </p>
          <p>
            But I realized my passion wasn’t in discovering the truth but in
            improving “user experience” for other researchers and college
            students by polishing my skills at seminar talks and lectures.
          </p>
          <p>
            Among the jobs for improving user experience, it makes sense to me
            to become a web developer because I can take advantage of coding
            skills acquired through data analysis.
          </p>
          <p>So here I am!</p>
        </div>
        <div class="measure whitespace-200" lang="ja">
          <p>
            東京出身。経済学博士号取得のためロンドンに5年間留学後、膨大なデータの分析を得意とする研究者としてストックホルム大学で8年、大阪大学で2年半働く。
          </p>
          <p>
            そうする中で、新しい物事の発見よりも、研究内容のプレゼンや授業の仕方を工夫して「ユーザー体験」を改善することの方が、やりがいを持てることに気づく。
          </p>
          <p>
            ユーザー体験の改善に関わる仕事の中で、データ分析で培ったプログラミングスキルを活かせるWebエンジニアを目指すことに決め、今日に至る。
          </p>
        </div>
      </section>
    </main>
    <footer class="vertical-spacing divider-light-grey">
      <p>
        Thank you for scrolling down until the end. By now you know me better;
        did you notice the background is brighter than at the top of this page?
      </p>
      <address>
        Designed and coded from scratch with vanilla HTML/CSS/JavaScript by Masa
        Kudamatsu (<a href="mailto:masakudamatsu@gmail.com"
          >masakudamatsu@gmail.com</a
        >) in Kyoto, Japan. Please feel free to contact me. :-)
      </address>
    </footer>
  </body>
  <script>
    const videos = document.querySelectorAll("video");
    const playbackButtons = document.querySelectorAll(".playbackButton");
    const imgs = document.querySelectorAll(".leaf-card figure img");
    const isNonRetinaScreen = window.matchMedia(
      "(-webkit-max-device-pixel-ratio: 1)"
    );
    const isRetinaMobileScreen = window.matchMedia(
      "(-webkit-min-device-pixel-ratio: 2) and (max-width: 382px)"
    );
    let filename;
    for (let i = 0; i < videos.length; i++) {
      if (i === 0) {
        filename = "line-height-picker";
      } else if (i === 1) {
        filename = "triangulum";
      } else if (i === 2) {
        filename = "tjg";
      } else if (i === 3) {
        filename = "my-ideal-map";
      } else {
        filename = null;
      }
      // Disable the default video player
      videos[i].controls = false;
      // Replace video files for mobile devices
      if (isNonRetinaScreen.matches || isRetinaMobileScreen.matches) {
        videos[i].children[0].src = `media/${filename}-mobile.mp4`;
        videos[i].children[1].href = `media/${filename}-mobile.mp4`;
      }
      // Reveal playback buttons
      playbackButtons[i].classList.remove("removed-if-js-disabled");
      playbackButtons[i].addEventListener("click", (event) => {
        event.stopPropagation();
        if (videos[i].paused) {
          videos[i].play();
        } else {
          videos[i].pause();
        }
      });
      // Reveal poster images
      imgs[i].classList.remove("removed-if-js-disabled");
      if (imgs[i].complete) {
        // image file has been cached
        imgs[i].classList.remove("transparent");
      } else {
        // trigger load event handler
        imgs[i].addEventListener("load", revealPosterImage, { once: true });
        function revealPosterImage(event) {
          event.target.classList.remove("transparent");
        }
      }
    }

    // prepare for playing videos only when fully visible within the screen
    const observer = new IntersectionObserver(callback, { threshold: 1.0 });
    function callback(videos) {
      videos.forEach((video) => {
        if (video.isIntersecting) {
          video.target.play();
        } else {
          video.target.pause();
        }
      });
    }

    for (let i = 0; i < videos.length; i++) {
      /* start loading the entire video file */
      videos[i].play();
      // handle the event in which each video is fully loaded
      const handleCanplaythrough = (event) => {
        // pause videos (to match the playback button labels)
        videos[i].pause();
        // rewind the video to the beginning (it may have started playing before fully loaded)
        videos[i].currentTime = 0;

        // hide poster images once the video is ready to play thorugh
        imgs[i].classList.add("transparent");

        // change playback button appearance
        playbackButtons[i].disabled = false;

        // toggle playbackButton label in response to video playing status
        videos[i].addEventListener("play", function () {
          playbackButtons[i].children[0].src = "pause.svg";
          playbackButtons[i].ariaLabel = `Pause ${playbackButtons[
            i
          ].ariaLabel.slice(5)}`; // drop "Play " at the beginning
        });
        videos[i].addEventListener("pause", function () {
          playbackButtons[i].children[0].src = "play.svg";
          playbackButtons[i].ariaLabel = `Play ${playbackButtons[
            i
          ].ariaLabel.slice(6)}`; // drop "Pause " at the beginning
        });

        // play videos only when fully visible within the screen
        observer.observe(videos[i]);
      };
      videos[i].addEventListener("canplaythrough", handleCanplaythrough, {
        once: true,
      });
    }

    // // debugging
    // for (let i = 0; i < imgs.length; i++) {
    //   if (imgs[i].complete) {
    //     console.log(`Poster image ${i} cached`);
    //   } else {
    //     let handleEvent;
    //     if (i === 0) {
    //       handleEvent = (event) => {
    //         console.log(
    //           `Poster image for Line-height Picker: "${event.type}" event fired`
    //         );
    //       };
    //     } else if (i === 1) {
    //       handleEvent = (event) => {
    //         console.log(
    //           `Poster image for Triangulum: "${event.type}" event fired`
    //         );
    //       };
    //     } else if (i === 2) {
    //       handleEvent = (event) => {
    //         console.log(`Poster image for TJG: "${event.type}" event fired`);
    //       };
    //     } else if (i === 3) {
    //       handleEvent = (event) => {
    //         console.log(
    //           `Poster image for My Ideal Map: "${event.type}" event fired`
    //         );
    //       };
    //     }
    //     imgs[i].addEventListener("load", handleEvent);
    //   }
    // }
    // for (let i = 0; i < videos.length; i++) {
    //   let handleEvent;
    //   if (i === 0) {
    //     handleEvent = (event) => {
    //       console.log(
    //         `Line-height Picker at ${videos[i].currentTime}: "${event.type}" event fired`
    //       );
    //     };
    //   } else if (i === 1) {
    //     handleEvent = (event) => {
    //       console.log(
    //         `Triangulum at ${videos[i].currentTime}: "${event.type}" event fired`
    //       );
    //     };
    //   } else if (i === 2) {
    //     handleEvent = (event) => {
    //       console.log(
    //         `TJG at ${videos[i].currentTime}: "${event.type}" event fired`
    //       );
    //     };
    //   } else if (i === 3) {
    //     handleEvent = (event) => {
    //       console.log(
    //         `My Ideal Map at ${videos[i].currentTime}: "${event.type}" event fired`
    //       );
    //     };
    //   }
    //   videos[i].addEventListener("loadstart", handleEvent);
    //   videos[i].addEventListener("loadedmetadata", handleEvent);
    //   videos[i].addEventListener("loadeddata", handleEvent);
    //   videos[i].addEventListener("canplay", handleEvent);
    //   videos[i].addEventListener("progress", handleEvent);
    //   videos[i].addEventListener("canplaythrough", handleEvent);
    //   videos[i].addEventListener("play", handleEvent);
    //   videos[i].addEventListener("pause", handleEvent);
    //   videos[i].addEventListener("error", handleEvent);
    //   videos[i].addEventListener("stalled", handleEvent);
    //   videos[i].addEventListener("suspend", handleEvent);
    //   videos[i].addEventListener("waiting", handleEvent);
    // }
  </script>
</html>
